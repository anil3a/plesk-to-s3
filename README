plesk-to-s3
===========

This is a simple script that will copy the latest server backup from Plesk 12 and 12.5 to an S3 bucket. It has been desinged to enable with cron jobs a way to schedule, daily and monthly backups of your plesk server to Amazon S3. It will keep a set amount of archived backups eg. 14 dailys and 12 monthlys.

Setup
-----
To setup follow the instructions in INSTALL.

How to restore from an S3 backup
--------------------------------

# To restore the whole server:

Download the entire "dumps" folder from S3 with the correct date eg. /mybucket/backup/daily/1511241645/dumps ( for 11 November 2015 @ 16:45)
Copy to your plesk server to the /var/lib/psa/dumps/ folder, you should then access the plesk backup manager and see the entire backup available.

# To restore one subscription:

Download the entire first level of the backup you want to restore eg.  /mybucket/backup/daily/1511241645/dumps/* excluding the domains folder

Download the subscription folder from the domains folder inside the backup with the date you want to restore from eg. /mybucket/backup/daily/1511241645/dumps/domains/test.com


Copy the downloaded folders back to /var/lib/psa/dumps/ 

You can now use the server backup manager to restore the backup

